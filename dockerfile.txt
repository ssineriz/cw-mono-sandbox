# Mono sandbox adapted to CodeWars
#
# VERSION               0.0.1

FROM      rwentzel/ubuntu-mono
MAINTAINER Jacques Sineriz "ssineriz@gmail.com"

# make sure the package repository is up to date
RUN echo "deb http://archive.ubuntu.com/ubuntu precise main universe" > /etc/apt/sources.list
RUN apt-get update

# install ucspi-tcp fot tcpserver
RUN apt-get install -y ucspi-tcp

# get server.sh
ADD https://github.com/ssineriz/cw-mono-sandbox/raw/master/container/server.sh /usr/local/bin/server.sh

# get runcsharp.sh
ADD https://github.com/ssineriz/cw-mono-sandbox/raw/master/container/runcsharp.sh /usr/local/bin/runcsharp.sh

# get ServiceStack.Text.dll
ADD https://github.com/ssineriz/cw-mono-sandbox/raw/master/lib/ServiceStack.Text.dll /usr/local/lib/mono/4.5/ServiceStack.Text.dll

# set execute permissions
RUN chmod +x /usr/local/bin/server.sh
RUN chmod +x /usr/local/bin/runcsharp.sh

EXPOSE 7777

# start listener
# ENTRYPOINT ["/usr/local/bin/server.sh"]